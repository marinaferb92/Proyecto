---
# ========================================================
# MAIN PLAYBOOK que carga variables y ejecuta despliegue
# ========================================================

- name: Cargar variables globales
  hosts: localhost
  gather_facts: false
  vars_files:
    - vars/variables.yml
  tasks:
    - debug:
        msg: "Variables cargadas correctamente"

# ========================================================
# IMPORTAR PLAYBOOKS EN ORDEN
# ========================================================
- import_playbook: playbooks/setup_backend.yml
- import_playbook: playbooks/deploy_backend.yml
- import_playbook: playbooks/setup_nfs.yml
- import_playbook: playbooks/setup_nfs_client.yml
- import_playbook: playbooks/setup_django.yml
- import_playbook: playbooks/deploy_django.yml
- import_playbook: playbooks/setup_loadbalancer.yml
- import_playbook: playbooks/setup_letsencrypt_https.yml
