<?php
require_once 'config.php';
require_once 'auth.php';

require_login();
require_role(['admin']);

$pageTitle = "Categorías de empleados";
include 'header.php';

$cats = $pdo->query("SELECT * FROM CategoriasEmpleados ORDER BY nombre")->fetchAll();
?>

<div class="d-flex justify-content-between mb-3">
    <h3>Categorías empleados</h3>
    <a href="categoria_empleado_editar.php" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Nueva categoría
    </a>
</div>

<div class="card shadow-sm">
<table class="table table-hover">
<thead><tr><th>Nombre</th><th>Descripción</th><th class="text-end">Acciones</th></tr></thead>
<tbody>
<?php foreach($cats as $c): ?>
<tr>
    <td><?=$c['nombre']?></td>
    <td><?=$c['descripcion']?></td>
    <td class="text-end">
        <a class="btn btn-sm btn-outline-primary" href="categoria_empleado_editar.php?id=<?=$c['categoria_id']?>"><i class="bi bi-pencil"></i></a>
    </td>
</tr>
<?php endforeach; ?>
</tbody>
</table>
</div>

<?php include 'footer.php'; ?>
