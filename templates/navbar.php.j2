<?php $current = basename($_SERVER['PHP_SELF']); ?>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
  <div class="container-fluid">

    <a class="navbar-brand fw-bold" href="dashboard.php">
      <i class="bi bi-hospital"></i> Clínica Estética
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="mainNav">

      <!-- MENÚ IZQUIERDA -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">

        <li class="nav-item">
          <a class="nav-link <?= $current==='dashboard.php'?'active':'' ?>" href="dashboard.php">
            <i class="bi bi-speedometer2"></i> Dashboard
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='clientes.php'?'active':'' ?>" href="clientes.php">
            <i class="bi bi-people"></i> Clientes
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='citas.php'?'active':'' ?>" href="citas.php">
            <i class="bi bi-calendar-date"></i> Citas
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= ($current==='inventario.php' || str_contains($current,'inventario'))?'active':'' ?>" 
             href="inventario.php">
            <i class="bi bi-box-seam"></i> Inventario
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='empleados.php'?'active':'' ?>" href="empleados.php">
            <i class="bi bi-person-badge"></i> Empleados
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='tratamientos.php'?'active':'' ?>" href="tratamientos.php">
            <i class="bi bi-heart-pulse"></i> Tratamientos
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='promociones.php'?'active':'' ?>" href="promociones.php">
            <i class="bi bi-stars"></i> Promociones
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='salas.php'?'active':'' ?>" href="salas.php">
            <i class="bi bi-door-open"></i> Salas
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='proveedores.php'?'active':'' ?>" href="proveedores.php">
            <i class="bi bi-truck"></i> Proveedores
          </a>
        </li>

        <!-- SOLO ADMIN -->
        <?php if ($_SESSION['rol'] === 'admin'): ?>

        <li class="nav-item">
          <a class="nav-link <?= $current==='logs.php'?'active':'' ?>" href="logs.php">
            <i class="bi bi-file-earearmark-text"></i> Logs
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link <?= $current==='estadisticas.php'?'active':'' ?>" href="estadisticas.php">
            <i class="bi bi-graph-up-arrow"></i> Estadísticas
          </a>
        </li>

        <?php endif; ?>

      </ul>

      <!-- MENÚ DERECHA -->
      <ul class="navbar-nav">

        <!-- Botón modo oscuro -->
        <li class="nav-item me-2">
          <button id="modoOscuroBtn" class="btn btn-light btn-sm">
            <i class="bi bi-moon-fill"></i>
          </button>
        </li>

        <!-- Usuario -->
        <?php if (!empty($_SESSION['usuario_id'])): ?>
        <li class="nav-item">
          <span class="navbar-text text-white me-3">
            <i class="bi bi-person-circle"></i>
            <?= htmlspecialchars($_SESSION['user'] ?? '') ?>
            (<?= htmlspecialchars($_SESSION['rol'] ?? '') ?>)
          </span>
        </li>
        <?php endif; ?>

        <!-- Logout -->
        <li class="nav-item">
          <a href="logout.php" class="nav-link text-warning fw-bold">
            <i class="bi bi-box-arrow-right"></i> Salir
          </a>
        </li>

      </ul>

    </div>
  </div>
</nav>
